<!DOCTYPE html>
<html lang="es">
{% include "fragments/head" %}

<body class="d-flex flex-column min-vh-100">
{% include "fragments/navbar" %}

<div class="container mb-5">

    <!-- Lista de alumnos -->
    <h1 class="mt-5 my-4 text-center fw-bold text-black">Lista de Alumnos</h1>
    {% if page is empty %}
    <div class="alert alert-info text-center">
        <i class="bi bi-info-circle"></i> No hay alumnos registrados.
    </div>
    {% else %}
    <table class="table table-striped">
        <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Apellido</th>
            <th>Grado</th>
            <th>Asignatura</th>
            <th>Operaciones</th>
        </tr>
        {% for alumno in page.content %}
        <tr>
            <td>{{ alumno.id }}</td>
            <td>{{ alumno.nombre }} </td>
            <td>{{ alumno.apellido }}</td>
            <td>{{ alumno.grado }}</td>
            <td>{{ alumno.asignatura }}</td>
            <td><a href="alumnos/{{ alumno.id }}">Ver detalles</a> </td>
        </tr>
        {% endfor %}
    </table>

<!-- Controles de Paginación -->
    {% if page.totalPages > 1 %}
    <nav class="mt-4">
        <div class="row align-items-center">
            <div class="col-md-6">
                <p class="text-muted mb-0">
                    {% set endItem = (page.number + 1) * page.size %}
                    {% set finalEndItem = endItem > page.totalElements ? page.totalElements : endItem %}
                    Mostrando {{ (page.number * page.size) + 1 }} a {{ finalEndItem }} de {{ page.totalElements }} Tarjetas
                </p>
            </div>
            <div class="col-md-6">
                <ul class="pagination justify-content-end mb-0">
                    <!-- Página anterior -->
                    {% if page.hasPrevious %}
                    <li class="page-item">
                        <a class="page-link"
                           href="?page={{ page.number - 1 }}&size={{ page.size }}">
                            <i class="bi bi-chevron-left"></i> Anterior
                        </a>
                    </li>
                    {% else %}
                    <li class="page-item disabled">
                        <span class="page-link"><i class="bi bi-chevron-left"></i> Anterior</span>
                    </li>
                    {% endif %}

                    <!-- Números de página -->
                    {% for i in range(0, page.totalPages - 1) %}
                    {% if i == page.number %}
                    <li class="page-item active">
                        <span class="page-link">{{ i + 1 }}</span>
                    </li>
                    {% elseif i >= (page.number - 2) and i <= (page.number + 2) %}
                    <li class="page-item">
                        <a class="page-link"
                           href="?page={{ i }}&size={{ page.size }}">{{ i + 1 }}</a>
                    </li>
                    {% endif %}
                    {% endfor %}

                    <!-- Página siguiente -->
                    {% if page.hasNext %}
                    <li class="page-item">
                        <a class="page-link"
                           href="?page={{ page.number + 1 }}&size={{ page.size }}">
                            Siguiente <i class="bi bi-chevron-right"></i>
                        </a>
                    </li>
                    {% else %}
                    <li class="page-item disabled">
                        <span class="page-link">Siguiente <i
                                class="bi bi-chevron-right"></i></span>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
    {% endif %}

    {% endif %}
</div>

{% include "fragments/footer" %}

<!-- Bootstrap 5.3 JS Bundle with Popper -->
<script src="/webjars/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
